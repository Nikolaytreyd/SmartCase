# SmartCase
Набор инструментов для определения траектории скважин с учетом кустования с интеграцией tNavigator
![Логотип](images/smartcase.png)

## Технологии
- kmeans & GMM кластеризация для выдления зон, кустов
- networkx  для проведения графовых расчетов для определения оптимальной проводки
- plotly для визуализации итогово расчета

## Пример использования скриптов
1. Определение кубов OIPM, GIPM, PERMX и сетки (данную работу выполянет full.py - Workflow tNavigator)
2. Данные выгруженные кубы путем преобразований по нормализации приводятся плотностному распределению и повдение свойства будут в дальнешем описывать точки 

Примеры итоговых целевых точек. Чем ярче точки, тем выше значение расчитанного свойства

![Зоны](images/target.png)


3. Точки с нормализованными координатами и свойствами PERMX * OIPM (для нефтяного кейса) и GIPM * PERMX (для газового кейса) используются в качестве исходной информации для
   выделения ранжированных зон путем использования кластериации Kmeans. Стоит отметить что пользователь в зависимости от ситуации может выбрать другие свойства, тут нет
   особых ограничений

![property](images/wzone.png)

4. Центральные точки кластеров в данном случае зон используются для вторичной кластреизации Kmeans в целях выделения кустовых площадок.
   При определнии расположения кустов, если указан путь к растровому снимку поврехности месторождения, будут корректироваться.
   Тем самым будут исключаться ситуации возможного расположения кустовой площадки в реках, озерах и болотах.

Пример обработки .png или .jpeg  файла на предмет наличия водных объектов

![map](images/map_corr.png)


5. В дальнешйем путем использования графовых алгоритмов (алгоритм Дейкстеры, алгоритм Минимального остовного дерева - можно настроить),
   по рассматриваемиой зоне, выбираются опорные точки и линии связи с уcлоdной точкой T2 (T2 выбирается из условий буримости, углов)
   Дальше по каждому пути: [опорная точка (возмоная точка T3); линия; опорные точки; точка T2] производятся опперации сглаживания, интерполяции
   Производятся также расчеты углов, длин и расстояний, проверяются условия буримости стволов  

Пример по определению траектории скважины

![Зоны](images/wells.png)


6. Итоговые результаты расчетов траектории представляются в виде файла welltrac.INC с шагом записи 10м. В итоге после расчетов тракетории производятся расчеты для графика
   ввода скважин в виде файлов gss.xlsm и sсhedulle.sch.

Пример визуализации скважин по отношению целевых точек. Исходя из неравного мастшатба по оси z. Траектории вытянуты и видны флуктуации, но так как неровности горизональных частей скважины представлены в диапазоне от 1 до 3 метров серьезной опасности это не несет. 

![Зоны](images/wtrac.png)

## Итоговое представление таректории в проекте tNavigator

Запасы нефти

![oil](images/oil.png)


Запасы газа

![gas](images/gas.png)


## Контакты
Если возникнут сложности в интеграции представленных выше решений, прошу связаться:)
Александров Николай - Aleksandrov.NA@yahoo.com - https://github.com/Nikolaytreyd
